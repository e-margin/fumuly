---
id: task-027
title: 会話履歴の保持期間ポリシー実装
parents: [プライバシー, バックエンド]
status: idea
depends_on: []
this_week: false
completed_at: null
progress: 0
note: "保留: task-034（暗号化）で緩和。会話履歴保持期間"
estimated_hours: 0.1
---

## 概要

チャット会話履歴がDBに無制限に蓄積する。保持期間ポリシーがない。

## リスク

- 借金額・差押状況・生活保護受給の発言が永遠に残る
- プライバシーポリシーにデータ保持期間の言及がない

## 実装案

### 案1: 自動削除（例: 90日）
- Supabase Edge FunctionのCronで90日以上前の会話を削除

### 案2: ユーザー主導の履歴クリア
- チャット画面に「会話履歴をクリア」ボタン追加
- すでに「全データ削除」はあるが、会話だけ消したいケースに対応

### 案3: 両方

## 推奨

案2をまず実装（簡単）。案1は運用開始後に判断。
